<style>
    .fade-enter-active,
    .fade-leave-active {
        transition: opacity 0.5s ease;
    }

    .fade-enter-from,
    .fade-leave-to {
        opacity: 0;
    }
</style>

<div id="app">
    @*    Paso 1*@
    <transition name="fade" mode="out-in">
        <div class="page-one" id="page-one" v-if="pag == 0">
            <div class="container mt-5 mb-5 d-flex justify-content-center">
                <div class="card px-1 py-4">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <h4 class="information mt-4" style="text-align: center;margin-bottom:20px">
                                        Lic. Lucia Chang
                                    </h4>

                                    <div style="text-align:center">
                                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQNL_ZnOTpXSvhf1UaK7beHey2BX42U6solRA&usqp=CAU" class="img-circle" style="width: 125px;" />
                                    </div>
                                </div>
                                <div style="margin-top:17px">
                                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                                </div>
                                                                <hr />

                            </div>
                        </div>
                        <div class="row" style="margin-top:15px;margin-bottom:-10px">
                            <div class="d-grid gap-2 col-12 mx-auto">
                                <button class="btn btn-primary btn-block confirm-button" id="btnSiguiente" v-on:click="pag++">Reservar turno</button>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="page-one" id="page-one" v-if="pag == 1">
            <div class="container mt-5 mb-5 d-flex justify-content-center">
                <div class="card px-1 py-4">
                    <div class="card-body">
                        <h5 class="information mt-4">Por favor, seleccione un día y horario</h5>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <div v-if="pag == 1 && fechaSeleccionada != ''">
                                        <div class="input-group">
                                            <input type="text" disabled class="form-control" v-on:click="setDia()" v-model="fechaSeleccionada" style="text-align:left">
                                            <button type="button" class="btn btn-success btn-edit" v-on:click="setDia(true)"><i class="fa-solid fa-pen-to-square" style="color:white"></i></button>
                                        </div>

                                    </div>
                                    <div v-else>
                                        <input type="button" class="form-control" placeholder="Día" v-on:click="setDia(false)" value="Día" style="text-align:left">

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <div v-if="pag == 1 && horaSeleccionada != ''">
                                        <div class="input-group">
                                            <input type="text" disabled class="form-control" v-on:click="setHorario()" v-model="horaSeleccionada" style="text-align:left">
                                            <button type="button" class="btn btn-success btn-edit" v-on:click="setHorario(true)"><i class="fa-solid fa-pen-to-square" style="color:white"></i></button>
                                        </div>
                                    </div>
                                    <div v-else-if="pag == 1 && fechaSeleccionada == ''">
                                        <input class="form-control" disabled type="button" placeholder="Horario" v-on:click="setHorario()" value="Horario" style="text-align:left">
                                    </div>
                                    <div v-else>
                                        <input class="form-control" type="button" placeholder="Horario" v-on:click="setHorario(false)" value="Horario" style="text-align:left">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br />
                        <div class="row">
                            <div class="d-grid gap-2 col-12 mx-auto">
                                <button class="btn btn-primary btn-block confirm-button" id="btnSiguiente" v-on:click="botonInicial()">Siguiente</button>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        @*    Paso Seleccionar dia*@
        <div class="page-two" id="page-two" v-else-if="pag == 2">
            <div class="container mt-5 mb-5 d-flex justify-content-center">
                <div class="card px-1 py-4">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-12">
                                <button type="button" class="btn-close" aria-label="Close" v-on:click="goFirstPage()"></button>

                            </div>
                        </div>
                        <h5 class="information mt-4">Por favor, seleccione un día</h5>
                        <br />
                        <div class="row">
                            <div class="col-sm-12">
                                <template v-if="pag == 2">
                                    <Datepicker style="justify-content:center" v-model="fechaSeleccionada" model-type="dd/MM/yyyy" inline locale="es" :min-date="new Date()" :enable-time-picker="false" auto-apply />
                                </template>
                            </div>
                        </div>
                        <br />
                        <div v-if="pag == 2 && showError && fechaSeleccionada == ''">
                            <p style="text-align:center">Por favor, ingrese una fecha</p>
                        </div>
                        <div class="row">
                            <div class="d-grid gap-2 col-12 mx-auto">
                                <button class="btn btn-primary btn-block confirm-button" v-on:click="nextStep()" id="btnSiguiente">Siguiente</button>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        @*    Paso Seleccionar Horario*@
        <div class="page-three" id="page-three" v-else-if="pag == 3">
            <div class="container mt-5 mb-5 d-flex justify-content-center">
                <div class="card px-1 py-4">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-12">
                                <button type="button" class="btn-close" aria-label="Close" v-on:click="goFirstPage()"></button>
                            </div>
                        </div>
                        <h5 class="information mt-4">Por favor, seleccione un horario</h5>
                        <div class="row">
                            <div class="col-sm-12">
                                <h6 class="information mt-4">Mañana</h6>
                                <div class="form-group">
                                    <button type="button" class="form-control" v-on:click="selectHora('09:00')"> 09:00 </button>
                                    <button type="button" class="form-control" v-on:click="selectHora('10:00')"> 10:00 </button>
                                    <button type="button" class="form-control" v-on:click="selectHora('11:00')"> 11:00 </button>
                                    <button type="button" class="form-control" v-on:click="selectHora('12:00')"> 12:00 </button>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <h6 class="information mt-4">Tarde</h6>
                                <div class="form-group">
                                    <button type="button" class="form-control" v-on:click="selectHora('15:00')"> 15:00 </button>
                                    <button type="button" class="form-control" v-on:click="selectHora('16:00')"> 16:00 </button>
                                    <button type="button" class="form-control" v-on:click="selectHora('17:00')"> 17:00 </button>
                                    <button type="button" class="form-control" v-on:click="selectHora('18:00')"> 18:00 </button>
                                </div>
                            </div>
                        </div>
                        <br />
                    </div>
                </div>
            </div>
        </div>
        @*Paso Final*@
        <div class="page-four" id="page-four" v-else-if="pag == 4">
            <div class="container mt-5 mb-5 d-flex justify-content-center">
                <div class="card px-1 py-4">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-12">
                                <button type="button" class="btn-close" aria-label="Close" v-on:click="goFirstPage()"></button>
                            </div>
                        </div>

                        <h5 class="information mt-4">Resumen del turno:</h5>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label>Fecha:</label>
                                    <input class="form-control" disabled type="text" v-model="fechaSeleccionada">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Hora:</label>
                                <input class="form-control" disabled type="text" v-model="horaSeleccionada">
                            </div>
                        </div>
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Profesional:</label>
                                <input class="form-control" disabled type="text" value=" Lic. Lucia Nazarena Chang">
                            </div>
                        </div>

                        <h5 class="information mt-4">Por favor, ingresa tus datos personales</h5>
                        <br />
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label>Nombre y Apellido:</label>
                                    <input class="form-control" type="text" v-model="pacNombreApellido">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label>Teléfono:</label>
                                    <div class="input-group"> <input class="form-control" type="number" v-model="pacTelefono"> </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label>Email:</label>
                                    <div class="input-group"> <input class="form-control" type="text" v-model="pacEmail"> </div>
                                </div>
                            </div>
                        </div>
                        <div class=" d-flex flex-column text-center px-5 mt-3 mb-3">
                            <small class="agree-text">Al confirmar, serás redirigido a MercadoPago</small>
                            <a href="#" class="terms">Términos y condiciones</a>
                        </div>
                        <div v-if="pag == 4 && showError && (pacNombreApellido == '' || pacTelefono == '' || pacEmail == '' || fechaSeleccionada == '' || horaSeleccionada == '')">
                            <p style="text-align:center">Por favor, complete todos los campos</p>
                        </div>
                        <div class="d-grid gap-2 col-12 mx-auto">
                            <button class="btn btn-primary btn-block confirm-button" v-on:click="btnConfirmarTurno()">Confirmar turno</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </transition>
</div>

<script>
    const app = Vue.createApp({

        data() {
            return {
                //Pagina Actual
                pag: 0,
                //Fecha y Hora seleccionada
                fechaSeleccionada: "",
                horaSeleccionada: "",
                //Variable para msotrar error
                showError: false,
                //Datos del paciente
                pacNombreApellido: "",
                pacTelefono: "",
                pacEmail: ""
            }
        },
        components: {
            Datepicker: VueDatePicker
        },
        methods: {
            nextStep() {
                if (this.fechaSeleccionada == "") {
                    this.showError = true;
                } else {
                    this.botonInicial();
                }
            },
            setDia(edit) {
                if (edit)
                {
                    this.horaSeleccionada = "";
                }
                this.pag = 2;
            },
            setHorario(edit) {
                this.pag = 3;
            },
            selectHora(hora) {
                this.horaSeleccionada = hora;
                this.botonInicial();
            },

            goFirstPage() {
                this.pag = 1;
            },
            botonInicial() {
                if (this.fechaSeleccionada != "" && this.horaSeleccionada != "") {
                    this.pag = 4;
                }
                if (this.fechaSeleccionada == "" && this.horaSeleccionada != "") {
                    this.pag = 2;
                }
                if (this.fechaSeleccionada != "" && this.horaSeleccionada == "") {
                    this.pag = 3;
                }
                if (this.fechaSeleccionada == "" && this.horaSeleccionada == "") {
                    this.pag = 2;
                }
            },
            btnConfirmarTurno() {
                if (this.pacNombreApellido == "" || this.pacTelefono == "" || this.pacEmail == "" || this.fechaSeleccionada == "" || this.horaSeleccionada == "") {
                    this.showError = true;
                }
            }
        }
    });

    app.mount('#app');

</script>
